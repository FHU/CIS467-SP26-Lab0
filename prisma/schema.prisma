// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
}

enum UserType {
  STUDENT
  FACULTY
  STAFF
  ALUMNI
  GUEST
}

model Task {
  id        Int     @id @default(autoincrement())
  title     String
  completed Boolean @default(false)
}

model User {
  id         Int      @id @default(autoincrement())
  email      String   @unique
  first_name String
  last_name  String
  user_type  UserType

  feedbacks Feedback[]
}

model Speaker {
  id         Int      @id @default(autoincrement())
  first_name String
  last_name  String
  bio        String
  title      String
  type       UserType
  completed  Boolean  @default(false)

  chapelSessions ChapelSession[]
}

model ChapelSession {
  id               Int      @id @default(autoincrement())
  speaker_id       Int
  topic            String
  scripture        String
  date             DateTime
  end_time         DateTime
  number_standings Int
  completed        Boolean  @default(false)

  feedbacks Feedback[]
  speaker   Speaker    @relation(fields: [speaker_id], references: [id])
}

model Feedback {
  id                Int     @id @default(autoincrement())
  stars             Int
  response          String
  user_id           Int
  chapel_session_id Int
  completed         Boolean @default(false)

  user          User          @relation(fields: [user_id], references: [id])
  chapelSession ChapelSession @relation(fields: [chapel_session_id], references: [id])
}
